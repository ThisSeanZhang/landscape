# Landscape - Linux Router Configuration Tool

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-green.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![DeepWiki](https://img.shields.io/badge/DeepWiki-ThisSeanZhang%2Flandscape-blue.svg?logo=data\:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAA05JREFUaEPtmUtyEzEQhtWTQyQLHNak2AB7ZnyXZMEjXMGeK/AIi+QuHrMnbChYY7MIh8g01fJoopFb0uhhEqqcbWTp06/uv1saEDv4O3n3dV60RfP947Mm9/SQc0ICFQgzfc4CYZoTPAswgSJCCUJUnAAoRHOAUOcATwbmVLWdGoH//PB8mnKqScAhsD0kYP3j/Yt5LPQe2KvcXmGvRHcDnpxfL2zOYJ1mFwrryWTz0advv1Ut4CJgf5uhDuDj5eUcAUoahrdY/56ebRWeraTjMt/00Sh3UDtjgHtQNHwcRGOC98BJEAEymycmYcWwOprTgcB6VZ5JK5TAJ+fXGLBm3FDAmn6oPPjR4rKCAoJCal2eAiQp2x0vxTPB3ALO2CRkwmDy5WohzBDwSEFKRwPbknEggCPB/imwrycgxX2NzoMCHhPkDwqYMr9tRcP5qNrMZHkVnOjRMWwLCcr8ohBVb1OMjxLwGCvjTikrsBOiA6fNyCrm8V1rP93iVPpwaE+gO0SsWmPiXB+jikdf6SizrT5qKasx5j8ABbHpFTx+vFXp9EnYQmLx02h1QTTrl6eDqxLnGjporxl3NL3agEvXdT0WmEost648sQOYAeJS9Q7bfUVoMGnjo4AZdUMQku50McDcMWcBPvr0SzbTAFDfvJqwLzgxwATnCgnp4wDl6Aa+Ax283gghmj+vj7feE2KBBRMW3FzOpLOADl0Isb5587h/U4gGvkt5v60Z1VLG8BhYjbzRwyQZemwAd6cCR5/XFWLYZRIMpX39AR0tjaGGiGzLVyhse5C9RKC6ai42ppWPKiBagOvaYk8lO7DajerabOZP46Lby5wKjw1HCRx7p9sVMOWGzb/vA1hwiWc6jm3MvQDTogQkiqIhJV0nBQBTU+3okKCFDy9WwferkHjtxib7t3xIUQtHxnIwtx4mpg26/HfwVNVDb4oI9RHmx5WGelRVlrtiw43zboCLaxv46AZeB3IlTkwouebTr1y2NjSpHz68WNFjHvupy3q8TFn3Hos2IAk4Ju5dCo8B3wP7VPr/FGaKiG+T+v+TQqIrOqMTL1VdWV1DdmcbO8KXBz6esmYWYKPwDL5b5FA1a0hwapHiom0r/cKaoqr+27/XcrS5UwSMbQAAAABJRU5ErkJggg==)](https://deepwiki.com/ThisSeanZhang/landscape)

<!-- DeepWiki badge generated by https://deepwiki.ryoppippi.com/ -->

Landscape is a web-based tool that helps you easily configure your favorite Linux distribution as a router.

> Built with Rust / eBPF / AF_PACKET.

[ÁÆÄ‰Ωì‰∏≠Êñá](./README.zh.md) | [English](./README.md)

## Complete Documentation

For detailed documentation, including installation guides, configuration options,  advanced usage, and so forth, visit our official documentation website:

üìñ [Landscape Documentation Website](https://landscape.whileaway.dev/introduction.html) | [Landscape Documentation Repository](https://github.com/ThisSeanZhang/landscape/tree/docs/docs)


---


## Screenshot
![](docs/images/1.png)

---

## Features

> ‚úÖ Implemented and tested
> ‚ö† Functional but untested
> ‚ùå Not implemented

* <u>IP Configuration</u>
  * *Static IP*

    * ‚úÖ Set IP address
    * ‚úÖ Configure default route via gateway
  * *DHCP Client*

    * ‚úÖ Specify hostname
    * ‚ùå Custom DHCP options
  * *PPPoE (PPPD version)*

    * ‚úÖ Set as default route
    * ‚ö† Multi-interface dialing
    * ‚úÖ Specify interface name
  * *PPPoE (eBPF version)*

    * ‚úÖ Protocol core implemented
    * ‚ùå GRO/GSO causing oversized packets (unsolved)
  * *DHCP Server*

    * ‚úÖ Provide basic IP assignment and renewal
    * ‚úÖ Custom gateway/subnet/access rules
    * ‚úÖ IP-MAC binding
    * ‚úÖ IP lease display
  * *IPv6 Support*

    * ‚úÖ Use DHCPv6-PD to request prefix from upstream
    * ‚úÖ Use RA to advertise prefix to downstream

* <u>Flow Control Module</u>

  * ‚úÖ Tag flows using IP + QoS
  * ‚úÖ Each flow can have its own DNS settings and cache
  * ‚úÖ Route marked traffic based on rules (direct/drop/reuse port/redirect to Docker or NIC)
  * ‚ùå Assign tracking marks to specified packets
  * ‚úÖ External IP behavior control via tagging and `geoip.dat` support
  * ‚úÖ When IP rules and DNS rules conflict, the priority of the rules is used for verdict (the smaller the value, the higher the priority)

* <u>Geo Management</u>

  * ‚úÖ Manage multiple Geo sources
  * ‚úÖ Auto-update Geo IP/Site data

* <u>DNS</u>

  * ‚úÖ Support DNS over HTTPS and DNS over TLS for upstream
  * ‚úÖ Assign specific upstream DNS by domain
  * ‚úÖ DNS Hijacking (return A records)
  * ‚ùå Hijack to return multiple records (other than A)
  * ‚úÖ Tag resolved IPs and handle with traffic control
  * ‚úÖ Support GeoSite files
  * ‚ùå Parse Docker container domain labels into DNS records
  * ‚úÖ Test domain resolution

* <u>NAT (eBPF)</u>

  * ‚úÖ Basic NAT support
  * ‚ö† Static mapping / Port forwarding (UI incomplete)
  * ‚úÖ NAT disables port reuse by default; reuse allowed via tagging rules

* <u>Metrics</u>

  * ‚úÖ Report connection stats (bytes/packets) every 5 seconds
  * ‚úÖ Display active connections (not yet combined with NAT)
  * ‚ùå Open export API for metrics

* <u>Docker</u>

  * ‚úÖ Basic Docker container management and runtime
  * ‚ö† Pull images
  * ‚úÖ Route traffic into TProxy-enabled containers

* <u>Wi-Fi</u>

  * ‚úÖ Enable/disable Wi-Fi using `iw`
  * ‚úÖ Create AP with `hostapd`
  * ‚ùå Connect to existing Wi-Fi hotspot

* <u>Storage</u>

  * ‚úÖ Use database instead of file-based config
  * ‚úÖ Export all current configs as `landscape_init.toml`
  * ‚ùå UI component to upload/restore config
  * ‚ùå Config editor via UI
  * ‚ùå Separate DB path for metrics

* <u>Miscellaneous</u>

  * ‚úÖ Login screen
  * ‚ùå English UI frontend
  * ‚úÖ NIC XPS/RPS optimization to distribute load across CPU cores

---

## How to Start & Limitations

### System Requirements

* Supported Linux Kernel: `6.9` or later
* (Optional) `docker`

### Manual Startup

1. Create config directory:

   ```bash
   mkdir -p ~/.landscape-router
   ```
2. Download **static.zip** from [release](https://github.com/ThisSeanZhang/landscape/releases) and extract to `~/.landscape-router/static`
3. If you have a desktop environment and browser, you can skip this step.
   Otherwise, refer to [Quick Start Guide](https://landscape.whileaway.dev/quick.html) to create `landscape_init.toml`
4. Start the service by downloading a release binary from [Releases](https://github.com/ThisSeanZhang/landscape/releases)
   Then run (as root):

   ```bash
   ./landscape-webserver
   ```

   Default port: **6300**
   Default username: **root**
   Default password: **root**
   Use `./landscape-webserver --help` for other options.
5. Once everything is confirmed to work, you can set it up as a systemd service.
   Create `/etc/systemd/system/landscape-router.service` with the following content:

   ```text
   [Unit]
   Description=Landscape Router

   [Service]
   ExecStart=/root/landscape-webserver  # remember to modify this path accordingly
   Restart=always
   User=root
   LimitMEMLOCK=infinity

   [Install]
   WantedBy=multi-user.target
   ```

### Docker Compose

See [Quick Start Guide](https://landscape.whileaway.dev/quick.html)

### Armbian Integration

See [Armbian Integration Guide](https://landscape.whileaway.dev/compilation/armbian.html)

---

## Build Instructions

See [Build Documentation](https://landscape.whileaway.dev/compilation/) or [Cross-compilation Guide](https://landscape.whileaway.dev/compilation/cross.html)

---

## LICENSE

* `landscape-ebpf`: [GNU GPL v2.0](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html)
* Other parts: [GNU GPL v3.0](https://www.gnu.org/licenses/gpl-3.0.html)

---

If you have any suggestions or issues, feel free to submit them via [issues](./issues/new).

## Star History

<a href="https://www.star-history.com/#ThisSeanZhang/landscape&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=ThisSeanZhang/landscape&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=ThisSeanZhang/landscape&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=ThisSeanZhang/landscape&type=Date" />
 </picture>
</a>